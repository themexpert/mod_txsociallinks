var tx_font_awesome_icons = [
"adjust",
"align-left",
"android",
"angle-double-right",
"angle-right",
"area-chart",
"arrow-circle-o-left",
"arrow-circle-up",
"arrow-up",
"arrows-v",
"backward",
"bar-chart-o",
"beer",
"bell-o",
"binoculars",
"bitcoin",
"book",
"btc",
"bullhorn",
"cab",
"camera",
"caret-left",
"caret-square-o-right",
"cart-plus",
"cc-mastercard",
"certificate",
"check-circle",
"chevron-circle-down",
"chevron-down",
"child",
"circle-thin",
"cloud",
"code",
"cog",
"comment-o",
"compress",
"credit-card",
"cube",
"dashboard",
"delicious",
"digg",
"dribbble",
"eject",
"envelope",
"eur",
"exclamation-circle",
"external-link-square",
"facebook",
"fast-backward",
"fighter-jet",
"file-code-o",
"file-o",
"file-powerpoint-o",
"file-video-o",
"film",
"flag ",
"flask",
"folder-o",
"forumbee",
"futbol-o",
"ge",
"gift",
"github-alt",
"globe",
"google-wallet",
"h-square",
"hand-o-right",
"headphones",
"history",
"html5",
"indent",
"instagram",
"joomla",
"keyboard-o",
"lastfm",
"legal",
"life-bouy",
"lightbulb-o",
"linkedin-square",
"list-ol",
"long-arrow-down",
"magic",
"mail-reply-all",
"mars-double",
"maxcdn",
"meh-o",
"minus",
"mobile",
"mortar-board",
"neuter",
"pagelines",
"paperclip",
"paw",
"pencil-square-o",
"picture-o",
"pinterest",
"play",
"plus",
"power-off",
"qrcode",
"quote-right",
"recycle",
"remove",
"reply",
"road",
"rouble",
"ruble",
"search",
"send",
"share-alt",
"shekel",
"shirtsinbulk",
"signal",
"skype",
"smile-o",
"sort-alpha-desc",
"sort-desc",
"sort-up",
"spoon",
"stack-exchange",
"star-half-empty",
"steam",
"stethoscope",
"stumbleupon ",
"suitcase",
"table",
"tags",
"terminal",
"th-large",
"thumbs-o-down",
"times",
"toggle-down",
"toggle-right",
"ransgender-alt",
"trello",
"tty",
"twitch",
"underline",
"unlock",
"usd",
"user-secret",
"venus-double",
"vimeo-square",
"volume-off",
"weibo",
"wifi",
"wrench",
"yelp",
"youtube-square",
"adn",
"align-right",
"angellist",
"angle-double-up",
"angle-up",
"arrow-circle-down ",
"arrow-circle-o-right",
"arrow-down",
"arrows",
"asterisk",
"ban",
"barcode",
"behance",
"bell-slash",
"birthday-cake",
"bold",
"bookmark",
"bug",
"bullseye",
"calculator",
"camera-retro",
"caret-right",
"caret-square-o-up",
"cc",
"cc-paypal",
"chain",
"check-circle-o",
"chevron-circle-left",
"chevron-left",
"circle",
"clipboard",
"cloud-download",
"code-fork",
"cogs",
"comments",
"connectdevelop",
"crop",
"cubes",
"dashcube",
"desktop",
"dollar",
"dropbox ",
"ellipsis-h",
"envelope-o",
"euro",
"exclamation-triangle",
"eye",
"facebook-f",
"fast-forward",
"file",
"file-excel-o",
"file-pdf-o",
"file-sound-o",
"file-word-o",
"filter",
"flag-checkered",
"flickr",
"folder-open",
"forward",
"gamepad",
"gear",
"git",
"github-square",
"google",
"graduation-cap",
"hacker-news",
"hand-o-up",
"heart",
"home",
"ils",
"info",
"institution",
"jpy",
"krw",
"lastfm-square",
"lemon-o",
"life-buoy",
"line-chart",
"linux",
"list-ul",
"long-arrow-left",
"magnet",
"male",
"mars-stroke",
"meanpath",
"mercury",
"minus-circle",
"mobile-phone",
"motorcycle",
"newspaper-o",
"paint-brush",
"paint-brush",
"paragraph",
"paypal",
"phone",
"pie-chart",
"pinterest-p",
"play-circle",
"plus-circle",
"print",
"question",
"ra",
"reddit",
"renren",
"reply-all",
"rocket",
"rss",
"rupee",
"search-minus",
"send-o",
"share-alt-square",
"sheqel",
"shopping-cart",
"simplybuilt",
"slack",
"soccer-ball-o",
"sort-amount-asc",
"sort-down",
"soundcloud ",
"spotify",
"stack-overflow",
"star-half-full",
"steam-square",
"stop",
"stumbleupon-circle",
"sun-o",
"tablet",
"tasks",
"text-height",
"th-list",
"thumbs-o-up",
"times-circle",
"toggle-left",
"toggle-up",
"trash",
"trophy",
"tumblr",
"twitter",
"undo",
"unlock-alt",
"user",
"user-times",
"venus-mars",
"vine",
"volume-up",
"weixin",
"windows",
"xing",
"yen ",
"align-center",
"ambulance",
"angle-double-down",
"angle-down",
"apple",
"arrow-circle-left",
"arrow-circle-o-up",
"arrow-left",
"arrows-alt",
"at",
"bank",
"bars",
"behance-square",
"bell-slash-o",
"bitbucket",
"bolt",
"bookmark-o",
"uilding",
"bus",
"calendar",
"car",
"caret-square-o-down",
"caret-up",
"cc-amex",
"stripe",
"chain-broken",
"check-square",
"chevron-circle-right",
"chevron-right",
"circle-o",
"clock-o",
"cloud-upload",
"codepen",
"columns",
"comments-o",
"copy",
"crosshairs",
"cut",
"database",
"deviantart",
"dot-circle-o",
"drupal",
"ellipsis-v",
"envelope-square",
"exchange",
"expand",
"eye-slash",
"facebook-official",
"fax",
"file-archive-o",
"file-image-o",
"file-photo-o",
"file-text",
"file-zip-o",
"fire",
"flag-o",
"floppy-o",
"folder-open-o",
"foursquare",
"gavel",
"gears",
"git-square",
"gittip",
"google-plus",
"gratipay",
"hand-o-down",
"hdd-o",
"heart-o",
"hospital-o",
"image",
"info-circle",
"ioxhost",
"jsfiddle",
"language",
"leaf",
"level-down",
"life-ring",
"link",
"list",
"location-arrow",
"long-arrow-right",
"mail-forward",
"map-marker",
"mars-stroke-h",
"medium",
"microphone",
"minus-square",
"money",
"music",
"openid",
"paper-plane",
"paste",
"pencil",
"phone-square",
"pied-piper",
"pinterest-square",
"play-circle-o",
"plus-square",
"puzzle-piece",
"question-circle",
"random",
"reddit-square",
"reorder",
"retweet",
"rotate-left",
"rss-square ",
"save",
"search-plus",
"server",
"share-square",
"shield",
"sign-in",
"sitemap",
"sliders",
"sort",
"sort-amount-desc",
"sort-numeric-asc",
"space-shuttle",
"square",
"star",
"star-half-o",
"step-backward",
"street-view",
"subscript",
"superscript",
"tachometer",
"taxi",
"text-width",
"thumb-tack",
"thumbs-up",
"times-circle-o",
"toggle-off",
"train",
"trash-o",
"truck",
"tumblr-square",
"twitter-square",
"university",
"unsorted",
"user-md",
"users",
"viacoin",
"vk",
"warning",
"whatsapp",
"won",
"xing-square",
"youtube",
"align-justify",
"anchor",
"angle-double-left",
"angle-left",
"archive",
"arrow-circle-o-down",
"arrow-circle-right",
"arrow-right",
"arrows-h",
"automobile",
"bar-chart",
"bed",
"bell",
"bicycle ",
"bitbucket-square",
"bomb",
"briefcase",
"building-o",
"buysellads",
"calendar-o",
"caret-down",
"caret-square-o-left",
"cart-arrow-down",
"cc-discover",
"cc-visa",
"check",
"check-square-o",
"chevron-circle-up",
"chevron-up",
"circle-o-notch",
"close",
"cny",
"coffee",
"comment",
"compass",
"copyright",
"css3",
"cutlery",
"dedent",
"diamond",
"download",
"edit",
"empire",
"eraser",
"exclamation",
"external-link",
"eyedropper",
"facebook-square",
"female ",
"file-audio-o",
"file-movie-o",
"file-picture-o",
"file-text-o",
"files-o ",
"fire-extinguisher",
"fa-flash",
"folder",
"font",
"frown-o",
"gbp",
"genderless",
"github",
"glass",
"google-plus-square",
"group",
"hand-o-left",
"header",
"heartbeat",
"hotel",
"inbox",
"inr",
"italic",
"key",
"laptop ",
"leanpub",
"level-up",
"life-saver",
"linkedin",
"list-alt",
"lock",
"long-arrow-up",
"mail-reply",
"mars",
"mars-stroke-v ",
"medkit",
"microphone-slash",
"minus-square-o",
"moon-o",
"navicon",
"outdent",
"paper-plane-o",
"pause",
"pencil-square",
"photo",
"pied-piper-alt",
"plane",
"plug",
"plus-square-o",
"qq",
"quote-left",
"rebel",
"refresh",
"repeat",
"rmb",
"rotate-right",
"rub",
"scissors",
"sellsy",
"share",
"share-square-o",
"ship",
"sign-out",
"skyatlas",
"slideshare",
"sort-alpha-asc",
"sort-asc",
"sort-numeric-desc",
"spinner",
"square-o",
"star-half",
"star-o",
"step-forward",
"strikethrough",
"subway",
"support",
"tag",
"tencent-weibo",
"th",
"thumbs-down",
"ticket",
"tint",
"toggle-on",
"transgender ",
"tree",
"try",
"turkish-lira",
"umbrella",
"unlink",
"upload",
"user-plus ",
"venus",
"video-camera",
"volume-down",
"wechat",
"wheelchair",
"wordpress",
"yahoo",
"youtube-play"];

/*
 webChef v1
 Developed and maintained by [Anam Ahmed](http://anam.co)
 License: MIT
*/

(function (window) {
   'use strict';

	var webChef = Object.create(null);

	webChef.cook = function(text, vals){
		var output = text,
			exprs = text.match(/<%\s?\w+\s?%>/ig);

		exprs.forEach(function(el){
			output = output.replace(el,vals[el.match(/<%\s?(\w+)\s?%>/i)[1]]||"");
		});

		return output;
	};

	webChef.makeRecipe=function(text){
		return function(data){
			return webChef.cook(text, data);
		};
	};

	//expose webChef to global object
	window.webChef = webChef;
}(window));


(function ($, icons, webChef) {
	var ACTIVE_INPUT;

	var iconLiTemplate =
		'<li class="<%active%>">'+
			'<span class="fa fa-<%icon%>"></span>'+
			'<p><%icon%> </p>'+
		'</li>';

	var iconModalTemplate =
		'<div class="modal fade" id="tx-icon-list-modal" style="z-index: 1051;" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="Icon List" aria-hidden="true">'+
			'<div class="modal-dialog">'+
				'<div class="modal-content">'+
					'<div class="modal-header">'+
						'<input type="text" id="tx-icon-search" class="form-control" placeholder="Search Icon">'+
					'</div>'+

					'<div class="modal-body clearfix">'+
						'<div class="form-group">'+
							'<ul class="tx-icons-list clearfix"></ul>'+
						'</div>'+
					'</div>'+

					'<div class="modal-footer">'+
						'<button type="button" class="btn btn-danger pull-left" data-dismiss="modal">Close</button>'+
						'<button type="button" class="btn btn-success pull-right faicon-insert-button ">Insert Icon</button>'+
					'</div>'+
				'</div>'+
			'</div>'+
		'</div>';

	var getSuggestedIcons = function(query){
		return $.grep(icons, function(icon){
			return icon.indexOf(query) !== -1;
		});
	};

	var generateIconsList = function(icons){
		var iconvalue = ACTIVE_INPUT ? ACTIVE_INPUT.val() : "";

		var list = $.map(icons, function(icon){
			var active = iconvalue ? (icon === iconvalue.split(" ")[1].replace("fa-", "")) : false;

			return webChef.cook(iconLiTemplate, {'icon':icon, size: "", active: active?'active':""});
		});

		return list.join("");
	};

	var generateIconsDOM = function(icons){
		var list = generateIconsList(icons);
		$(".tx-icons-list").html(list);
	};

	var getSelectedIcon = function(){
		// var iconSize = $("#tx-icon-size").val();
		var iconClass = $(".tx-icons-list li.active span").attr('class');
		// console.log("size: %s, class: %s", iconSize, iconClass);

		// return iconClass ? iconClass+" "+iconSize : false;
		return iconClass ? iconClass : false;
	};

	$(document).on("click", ".faicon-insert-button", function(){
		var icon = getSelectedIcon();
		var iconClass = $(".tx-icons-list li.active span").attr('class');
		if(!icon) {
			alert("please select an icon to select");
			return;
		}

		ACTIVE_INPUT.val(icon);
    	var a = '<i class="'+iconClass+'"></i>';
		ACTIVE_INPUT.parent().find('span.add-on').html(a);

    	ACTIVE_INPUT.trigger("icon:inserted");
		$("#tx-icon-list-modal").modal('hide');
	});

	$(document).on("keyup change", "#tx-icon-search", function(){
		var query = $(this).val();
		var suggestedIcons = getSuggestedIcons(query);
		generateIconsDOM(suggestedIcons);
	});

  $(document).on("click",".tx-icons-list li",function(){
    $(".tx-icons-list li").removeClass("active");
    $(this).addClass("active");
  });



	var iconSelector = function(options){
		
		if(options){
      		ACTIVE_INPUT =  jQuery(options).prev();
			$("#tx-icon-list-modal").modal('show');			
			// generateIconsDOM(icons);			
		}else{
      		// ACTIVE_INPUT = $(options.input);
			// $("#tx-icon-list-modal").modal('show');
			generateIconsDOM(icons);			
		}
		// $(this).on("click", function(e){
		// });
	};

	//onload
	$(function(){
		$("body").append(iconModalTemplate);
		generateIconsDOM(icons);
	});

	$.fn.iconSelector = iconSelector;

}(jQuery, tx_font_awesome_icons, webChef));
